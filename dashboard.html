<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸ“Š Rotcod Admin Dashboard</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chart.js">
<style>
  body { font-family: Arial, sans-serif; margin:0; background:#f3f4f6; color:#111; transition:0.3s; }
  body.dark { background:#1e1e2f; color:#ddd; }
  header { display:flex; justify-content:space-between; align-items:center; padding:15px 20px; background:#1e40af; color:white; }
  header button { background:#2563eb; color:white; border:none; padding:5px 10px; cursor:pointer; border-radius:5px; margin-left:10px; }
  main { padding:20px; }
  .stats { display:flex; flex-wrap:wrap; gap:20px; margin-bottom:20px; }
  .card { background:white; border-radius:10px; padding:15px; flex:1 1 150px; box-shadow:0 2px 6px rgba(0,0,0,0.1); text-align:center; transition:0.3s; }
  body.dark .card { background:#2a2a3b; color:#ddd; }
  .card h3 { margin:10px 0; font-size:20px; }
  #searchExport { display:flex; justify-content:space-between; margin-bottom:10px; flex-wrap:wrap; gap:10px; }
  #searchExport input { padding:5px; flex:1; min-width:150px; }
  #transactions { width:100%; border-collapse:collapse; }
  #transactions th, #transactions td { border:1px solid #ccc; padding:8px; text-align:center; }
  body.dark #transactions th, body.dark #transactions td { border-color:#555; }
  canvas { margin-top:30px; background:white; border-radius:10px; padding:10px; }
  body.dark canvas { background:#2a2a3b; }
</style>
</head>
<body>

<header>
  <h1>ðŸ“Š Rotcod Admin Dashboard</h1>
  <div>
    <button onclick="toggleDarkMode()">ðŸŒ™ Dark Mode</button>
    <button onclick="logout()">Logout</button>
  </div>
</header>

<main>
  <div class="stats">
    <div class="card">
      <h3>Float Balance</h3>
      <p id="floatBalance">$30</p>
    </div>
    <div class="card">
      <h3>Total Sales</h3>
      <p id="totalSales">$250</p>
    </div>
    <div class="card">
      <h3>Total Profit</h3>
      <p id="totalProfit">$15</p>
    </div>
    <div class="card">
      <h3>Bundles Sold</h3>
      <p id="bundlesSold">2</p>
    </div>
    <div class="card">
      <h3>Total Transactions</h3>
      <p id="totalTransactions">2</p>
    </div>
  </div>

  <div id="searchExport">
    <input type="text" id="searchInput" placeholder="Search by Customer or Phone" onkeyup="filterTable()">
    <button onclick="exportToExcel()">Export Excel</button>
  </div>

  <table id="transactions">
    <thead>
      <tr>
        <th>ID</th>
        <th>Customer</th>
        <th>Phone</th>
        <th>Bundle</th>
        <th>Price</th>
        <th>Fee</th>
        <th>Profit</th>
        <th>Time</th>
      </tr>
    </thead>
    <tbody id="transactionBody">
      <tr><td>T001</td><td>John</td><td>0712345678</td><td>Daily 500MB</td><td>50</td><td>5</td><td>5</td><td>2025-10-29 12:00</td></tr>
      <tr><td>T002</td><td>Amina</td><td>0798765432</td><td>Weekly 2GB</td><td>200</td><td>10</td><td>10</td><td>2025-10-29 12:10</td></tr>
    </tbody>
  </table>

  <canvas id="bundlesChart" width="400" height="200"></canvas>
  <canvas id="revenueChart" width="400" height="200"></canvas>
</main>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // Dark mode
  function toggleDarkMode() {
    document.body.classList.toggle('dark');
  }

  // Logout
  function logout() {
    localStorage.removeItem("rotcod_admin");
    window.location.href = "login.html";
  }

  // Filter table
  function filterTable() {
    const filter = document.getElementById('searchInput').value.toLowerCase();
    const rows = document.querySelectorAll('#transactionBody tr');
    rows.forEach(row => {
      row.style.display = [...row.cells].some(cell => cell.textContent.toLowerCase().includes(filter)) ? '' : 'none';
    });
  }

  // Export to Excel
  function exportToExcel() {
    const table = document.getElementById('transactions');
    const wb = XLSX.utils.table_to_book(table, {sheet: "Transactions"});
    XLSX.writeFile(wb, "transactions.xlsx");
  }

  // Charts
  const bundlesCtx = document.getElementById('bundlesChart').getContext('2d');
  const revenueCtx = document.getElementById('revenueChart').getContext('2d');

  const bundlesChart = new Chart(bundlesCtx, {
    type: 'bar',
    data: {
      labels: ['Daily 500MB','Weekly 2GB'],
      datasets: [{
        label: 'Bundles Sold',
        data: [1,1],
        backgroundColor: ['#1e40af','#2563eb']
      }]
    },
    options: { responsive:true }
  });

  const revenueChart = new Chart(revenueCtx, {
    type: 'line',
    data: {
      labels: ['2025-10-29 12:00','2025-10-29 12:10'],
      datasets: [{
        label:'Revenue',
        data: [50,200],
        borderColor:'#1e40af',
        backgroundColor:'rgba(30,64,175,0.2)',
        fill:true
      },{
        label:'Profit',
        data:[5,10],
        borderColor:'#2563eb',
        backgroundColor:'rgba(37,99,235,0.2)',
        fill:true
      }]
    },
    options:{ responsive:true }
  });

  // Auto-refresh every 30s
  setInterval(() => location.reload(), 30000);
</script>

<!-- XLSX library for Export Excel -->
<script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>

</body>
</html>
